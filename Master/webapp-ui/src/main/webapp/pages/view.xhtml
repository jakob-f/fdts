<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:p="http://primefaces.org/ui">

<ui:composition template="templates/templatePublic.xhtml">
    <ui:param name="asset" value="#{assetsController.fromParamter}" />

    <ui:define name="pageName"> | #{asset.name}</ui:define>

    <ui:define name="mainContent">
        <div id="main">
            <section>
                <h:panelGroup layout="block" rendered="#{asset != null}">
                    <!-- IMAGE -->
                    <h:panelGroup layout="block" rendered="#{asset.fileType == 'IMAGE'}">
                       <p:lightBox id="lighbox">
                           <h:outputLink value="#">
                               <img src="#{asset.streamURL}" title="#{asset.name}" alt="image asset" style="height: auto; width: 100%;" />
                           </h:outputLink>
                           <f:facet name="inline">
                                <img src="#{asset.streamURL}" title="#{asset.name}" alt="image asset" />
                           </f:facet>
                        </p:lightBox>
                    </h:panelGroup>
                    <!-- OTHER -->
                    <h:panelGroup layout="block" rendered="#{asset.fileType == 'OTHER'}">
                        <h1>OTHER</h1>
                    </h:panelGroup>
                    <!-- PDF -->
                    <h:panelGroup layout="block" rendered="#{asset.fileType == 'PDF'}">
                       <object type="application/pdf" data="#{asset.streamURL}" height="500" width="100%">
                            Your browser can't display pdf try to download the file instead.
                       </object>
                    </h:panelGroup>
                    <!-- VIDEO -->
                    <h:panelGroup layout="block" rendered="#{asset.fileType == 'VIDEO'}">
                        <video height="auto" width="100%" controls="true">
                                <source src="#{asset.streamURL}" type="video/ogg" />
                                Your browser does not support the video tag.
                        </video>
                    </h:panelGroup>
                </h:panelGroup>
                <h:panelGroup layout="block" rendered="#{asset == null}">
                    <h2>
                        <h:outputText value="Computer says no!" />
                    </h2>
                    <p>requested resource not available</p>
                </h:panelGroup>
                
                <h:panelGroup layout="block" rendered="#{credentialsBean.loggedIn}" style="background: #FFF; border: 1px solid #DDD; margin-top: 50px; padding: 2px 5px;">
                    <p:dataGrid var="inSetAsset" value="#{assetsController.allOtherFromSet(asset)}" columns="3" layout="grid"> 
                        <p:panel>
                            <h:panelGrid columns="1" style="width: 100%; padding: 5px 2px;">
                                <h:outputLink value="#{inSetAsset.viewPath}" title="#{inSetAsset.name}">
                                    <div class="assetThumb" style="background-image: url(#{inSetAsset.thumbnailStreamURL});">
                                        <span class="assetThumbText">
                                            <h:outputText value="#{inSetAsset.name}" /><br />
                                            <h:outputText value="#{inSetAsset.timeStamp}" />
                                        </span>
                                    </div>
                                </h:outputLink>
                            </h:panelGrid>
                        </p:panel>
                    </p:dataGrid>
                </h:panelGroup>
            </section>
            
            <aside>
                <h:panelGroup columns="1" cellpadding="1" cellspacing="2" width="100%" rendered="#{asset != null}">
                    <h2>
                        <h:outputText value="#{asset.name}" />
                    </h2>
                    <p>
                        <h:outputText value="#{asset.fileType}" /><br />
                        <h:outputText value="#{asset.fileSize}" /><br />
                        <h:outputText value="#{asset.timeStamp}" /><br />
                        <h:outputLink value="#{asset.streamURL}">raw</h:outputLink><br />
<!--                     <p:barcode value="#{asset.streamURL}" type="qr" width="50%"/>                 -->
                    </p>
                </h:panelGroup>
            </aside>
        </div>
	</ui:define>
</ui:composition>
</html>