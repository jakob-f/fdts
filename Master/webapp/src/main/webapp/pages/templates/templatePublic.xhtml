<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:p="http://primefaces.org/ui">

<ui:composition template="templatePage.xhtml">
    <ui:define name="page">
        <h:outputStylesheet library="css" name="layout_public.css" />

        <!-- header -->
        <header>
            <div id="logo">
                <h:outputLink value="#{request.contextPath}" title="home">
                    <h:graphicImage library="images" name="logo_grey.png" alt="home" />
                </h:outputLink>
            </div>
            
           <div id="searchFieldSmall">
                <h:form id="searchFormSmall">
                    <p:panelGrid style="width: 100%" rendered="#{not hideSearchFieldSmall}">
                        <p:row>
                            <p:column style="width: 100%">
                                <p:inputText id="search" required="true" requiredMessage="enter search string" value="#{navigationController.searchString}"
                                    style="border-bottom-right-radius: 0; border-top-right-radius: 0; width: 100%;">
                                    <p:watermark for="search" value="search: videos, images, documents..." />
                                </p:inputText>
                            </p:column>
                            <p:column>
                                <p:commandButton icon="ui-icon-search" title="search" action="#{navigationController.doSearch}"
                                    style="border-left: none; border-bottom-left-radius: 0; border-top-left-radius: 0; width: 40px;" />
                            </p:column>
                        </p:row>
                    </p:panelGrid>
                </h:form>
            </div>
            
            <div id="login" align="right">
                <h:form id="loginForm">
                    <p:panelGrid rendered="#{!credentialsBean.loggedIn}">
                        <p:row>
                            <p:column />
                            <p:column>
                                <a href="./contact">forgot password?</a>
                            </p:column>
                        </p:row>
                        <p:row>
                            <p:column>
                                <p:inputText id="username" required="true" requiredMessage="please enter a username" value="#{loginController.username}" style="width: 100px">
                                    <p:watermark for="username" value="username..." />
                                </p:inputText>
                            </p:column>
                            <p:column>
                                <p:password id="password" required="true" requiredMessage="please enter a password" value="#{loginController.password}" style="width: 100px">
                                    <p:watermark for="password" value="password..." />
                                </p:password>
                            </p:column>
                            <p:column>
                                <p:commandButton value="login" title="login" upadate="loginForm" action="#{loginController.doLogin}" onsuccess="window.location.reload();" />
                            </p:column>
                        </p:row>
                    </p:panelGrid>
                    
                    <p:panelGrid rendered="#{credentialsBean.loggedIn}">
                        <p:row>
                            <p:column>
			                     <h:outputText value="logged in as" />
                                 <em><h:outputText value="#{credentialsBean.user.name}" /></em>
                            </p:column>
                            <p:column style="padding-left: 15px">
                                <p:commandButton value="logout" title="logout" action="#{loginController.doLogout}" onsuccess="window.location.reload();" />
                            </p:column>
                        </p:row>
                    </p:panelGrid>
                </h:form>
            </div>
        </header>

        <!-- main content -->
        <main>
            <div style="float: right">
                <h:form>
                    <p:messages id="messages" autoUpdate="true" closable="true" showIcon="false" style="margin-top: 10px"/>
                </h:form>
            </div>            
            <ui:insert id="mainContent" name="mainContent">
                <h1>NO CONTENT AVAILABLE!</h1>
            </ui:insert>
        </main>
    </ui:define>
</ui:composition>
</html>